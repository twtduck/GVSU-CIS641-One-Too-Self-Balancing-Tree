<Application x:Class="OneTooCalendar.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:OneTooCalendar"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <materialDesign:BundledTheme BaseTheme="Light" PrimaryColor="DeepPurple" SecondaryColor="Lime" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Defaults.xaml" /> 
            </ResourceDictionary.MergedDictionaries>
            
            <DataTemplate DataType="{x:Type local:SynchronizingCalendarViewModel}">
                <TextBlock TextAlignment="Center" VerticalAlignment="Center">Synchronizing calendar. Please wait...</TextBlock>
            </DataTemplate>
            
            <DataTemplate DataType="{x:Type local:MainWindowViewModel}">
                <ContentPresenter Content="{Binding CurrentView}"></ContentPresenter>
            </DataTemplate>
            
            <DataTemplate DataType="{x:Type local:CalendarViewModel}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <ContentPresenter Content="{Binding CalendarControlsBarViewModel}" Grid.Row="0"/>
                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <ContentPresenter Content="{Binding CalendarWeekViewModel}" Grid.Column="0"/>
                        <ContentPresenter Content="{Binding BacklogViewModel}" Grid.Column="1"/>
                    </Grid>
                </Grid>
            </DataTemplate>
            
            <DataTemplate DataType="{x:Type local:CalendarWeekViewModel}">
                <ScrollViewer>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <ItemsControl
                            Grid.Column="0"
                            ItemsSource="{Binding TimeLabels}"
                        >
                        </ItemsControl>
                        <ItemsControl
                            Grid.Column="1"
                            ItemsSource="{Binding DateViewModels}"
                        >
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Rows="1" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </Grid>
                    
                </ScrollViewer>
            </DataTemplate>
            
            <DataTemplate DataType="{x:Type local:BacklogViewModel}">
                <TextBlock TextAlignment="Center" VerticalAlignment="Center" Margin="12" Text="Backlog coming soon!" />
            </DataTemplate>
            
            <DataTemplate DataType="{x:Type local:DateViewModel}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="20" />
                        <RowDefinition Height="36" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Row="0" TextAlignment="Center" Text="{Binding DayOfTheWeek}" />
                    <TextBlock Grid.Row="1" TextAlignment="Center" FontSize="28" Text="{Binding DayNumber}" />
                    <ItemsControl Grid.Row="2" ItemsSource="{Binding HourPeriods}" />
                </Grid>
            </DataTemplate>
            
            <DataTemplate DataType="{x:Type local:HourPeriodViewModel}">
                <ItemsControl ItemsSource="{Binding QuarterHourPeriods}" />
            </DataTemplate>
            
            <DataTemplate DataType="{x:Type local:QuarterHourPeriodViewModel}">
                <Separator Height="10" />
            </DataTemplate>
            
            <DataTemplate DataType="{x:Type local:CalendarControlsBarViewModel}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Button Grid.Column="0" Command="{Binding PreviousWeekButtonCommand}">
                        <!-- chevron-left icon from https://materialdesignicons.com/ -->
                        <Viewbox Width="48" Height="48">
                            <Canvas Width="24" Height="24">
                                <Path Fill="Black" Data="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" />
                            </Canvas>
                        </Viewbox>
                    </Button>
                    <Button Grid.Column="1" Command="{Binding NextWeekButtonCommand}">
                        <!-- chevron-right icon from https://materialdesignicons.com/ -->
                        <Viewbox Width="48" Height="48">
                            <Canvas Width="24" Height="24">
                                <Path Fill="Black" Data="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                            </Canvas>
                        </Viewbox>
                    </Button>
                </Grid>
            </DataTemplate>
        </ResourceDictionary>
    </Application.Resources>
</Application>
